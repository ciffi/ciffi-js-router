var $=require("jquery"),PushState=function(){function t(){this.currentRoute=!1,this.init()}function n(t){$(document).on("click",'a[href]:not([data-push="false"])',function(n){n.preventDefault();var e=$(this).attr("href");0===e.indexOf("/")&&(e=e.replace("/",""));var r={url:e};return o(r,e,t),!1})}function o(t,n,o){return o.currentRoute&&o.currentRoute===n||(""===n?window.history.pushState(t,null,window.location.pathname):window.history.pushState(t,null,"/"+n)),n}return t.prototype.init=function(){this.isSupported=window.history&&"object"==typeof window.history},t.prototype.checkSupport=function(){return this.isSupported},t.prototype.watcher=function(t,o){return function(t){var n=t.pushState;t.pushState=function(o){return"function"==typeof t.onpushstate&&t.onpushstate({state:o}),n.apply(t,arguments)}}(window.history),window.onpopstate=history.onpushstate=$.proxy(function(t){t.state?(this.currentRoute=t.state.url,o(t.state)):window.location.reload()},this),n(this),t},t.prototype.push=function(t,n){o(t,n,this)},new t}();module.exports=PushState;